<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="iconfont/iconfont.css">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <title>购物车_茗茶网-茶叶、茶具、茶文化、品茶忆友、铁壶</title>
</head>

<body>
    <div class="container">
        <div class="ebtea_main">
            <!-- left-aside -->
            <div class="ebtea_left">
                <div class="e_history">
                    <div class="banner">
                        <a href="javascript:;"><img width="155" height="155" src="images/l1.jpg" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img width="155" height="155" src="images/l2.jpg" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img width="158" height="220" src="images/l3.jpg" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img width="158" src="images/l4.jpg" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img src="" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img src="" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img src="" alt=""></a>
                    </div>
                    <div class="banner">
                        <a href="javascript:;"><img src="" alt=""></a>
                    </div>
                </div>
            </div>
            <!-- 主体 -->
            <div class="inner_warp">
                <!-- 顶部图片 -->
                <div class="banner">
                    <a href="javascript:;">
                        <img src="images/product.jpg" alt="">
                    </a>
                </div>
                <!-- 面包屑导航 -->
                <div class="bread-crumbs">
                    您当前的位置：<span class="now">购物车</span>
                </div>
                <div id="main">
                    <!-- 购物车 -->
                    <div class="cart-title">
                        <h1>
                            <span class="iconfont icon-shop-cart icon"></span>
                            <span class="shop-cart">购物车</span>
                        </h1>
                    </div>
                    <div class="steps">
                        <table width="100%">
                            <tbody>
                                <tr>
                                    <td class="step-item step-1 active">
                                        <span>
                                            <q class="fa fa-circle icon" aria-hidden="true"></q>
                                            <i>1</i>
                                            购物车
                                        </span>
                                    </td>
                                    <td class="icon step-arrow">
                                        <span class="iconfont icon-rightarrow arrow"></span>
                                    </td>
                                    <td class="step-item step-2">
                                        <span>
                                            <q class="fa fa-circle icon" aria-hidden="true"></q>
                                            <i>2</i>
                                            填写和提交订单信息
                                        </span>
                                    </td>
                                    <td class="icon step-arrow">
                                        <span class="iconfont icon-rightarrow arrow"></span>
                                    </td>
                                    <td class="step-item step-3">
                                        <span>
                                            <q class="fa fa-circle icon" aria-hidden="true"></q>
                                            <i>3</i>
                                            成功提交订单
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="cart-container" id="cart_container">
                        <div class="title">
                            <h2>已选择的商品</h2>
                        </div>
                        <table width="100%" class="cart-main">
                            <colgroup>
                                <col class="col-1">
                                <col class="col-2">
                                <col class="col-3">
                                <col class="col-4">
                                <col class="col-5">
                                <col class="col-6">
                                <col class="col-7">
                                <col class="col-8">
                            </colgroup>
                            <thead>
                                <tr>
                                    <th colspan="2">商品</th>
                                    <th>销售价</th>
                                    <th>数量</th>
                                    <th>优惠金额</th>
                                    <th>积分</th>
                                    <th>小计</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody class="cart-item">
                                <tr class="cart-product last">
                                    <td>
                                        <div class="p-pic">
                                            <a href="" target="_blank">
                                                <img src="images/cart-1.jpg" alt=""></a>
                                        </div>
                                    </td>
                                    <td class="p-info" width="344px">
                                        <div class="p-title">
                                            <a target="_blank" href="">品茶忆友 铸铁壶煮茶壶老铁壶 日本铁壶南部铁壶水壶 木桶铁壶
                                            </a></div>
                                        <div class="p-spec fix-empty">型号：黑色</div>
                                        <!--赠品 -->
                                        <!--商品促销 -->
                                        <div class="p-promotion">
                                            <ul>
                                            </ul>
                                        </div>
                                    </td>
                                    <td class="p-price">￥159.00</td>
                                    <td>
                                        <div class="p-quantity">
                                            <a href="javascript:void(0);" class="btn-decrease">-</a>
                                            <input type="text" name="modify_quantity[goods_302_1130][quantity]"
                                                value="1">
                                            <a href="javascript:void(0);" class="btn-increase">+</a>
                                        </div>
                                        <span class="warn-message"></span>
                                    </td>
                                    <td class="p-discount">￥159.00</td>
                                    <td class="p-integral">159 </td>
                                    <td class="p-subtotal">￥159.00</td>
                                    <td class="p-action">
                                        <a href="" class="btn-fav">收藏</a>
                                        <i>|</i>
                                        <a href="javascript:void(0);" class="btn-delete">移除</a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody class="cart-item">
                                <tr class="cart-product last">
                                    <td>
                                        <div class="p-pic">
                                            <a href="" target="_blank">
                                                <img src="images/cart-1.jpg" alt=""></a>
                                        </div>
                                    </td>
                                    <td class="p-info" width="344px">
                                        <div class="p-title">
                                            <a target="_blank" href="">品茶忆友 铸铁壶煮茶壶老铁壶 日本铁壶南部铁壶水壶 木桶铁壶
                                            </a></div>
                                        <div class="p-spec fix-empty">型号：黑色</div>
                                        <!--赠品 -->
                                        <!--商品促销 -->
                                        <div class="p-promotion">
                                            <ul>
                                            </ul>
                                        </div>
                                    </td>
                                    <td class="p-price">￥159.00</td>
                                    <td>
                                        <div class="p-quantity">
                                            <a href="javascript:void(0);" class="btn-decrease">-</a>
                                            <input type="text" name="modify_quantity[goods_302_1130][quantity]"
                                                value="1">
                                            <a href="javascript:void(0);" class="btn-increase">+</a>
                                        </div>
                                        <span class="warn-message"></span>
                                    </td>
                                    <td class="p-discount">￥0.00</td>
                                    <td class="p-integral">159 </td>
                                    <td class="p-subtotal">￥159.00</td>
                                    <td class="p-action">
                                        <a href="" class="btn-fav">收藏</a>
                                        <i>|</i>
                                        <a href="javascript:void(0);" class="btn-delete">移除</a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody class="cart-item">
                                <tr class="cart-product last">
                                    <td>
                                        <div class="p-pic">
                                            <a href="" target="_blank">
                                                <img src="images/cart-1.jpg" alt=""></a>
                                        </div>
                                    </td>
                                    <td class="p-info" width="344px">
                                        <div class="p-title">
                                            <a target="_blank" href="">品茶忆友 铸铁壶煮茶壶老铁壶 日本铁壶南部铁壶水壶 木桶铁壶
                                            </a></div>
                                        <div class="p-spec fix-empty">型号：黑色</div>
                                        <!--赠品 -->
                                        <!--商品促销 -->
                                        <div class="p-promotion">
                                            <ul>
                                            </ul>
                                        </div>
                                    </td>
                                    <td class="p-price">￥159.00</td>
                                    <td>
                                        <div class="p-quantity">
                                            <a href="javascript:void(0);" class="btn-decrease">-</a>
                                            <input type="text" name="modify_quantity[goods_302_1130][quantity]"
                                                value="1">
                                            <a href="javascript:void(0);" class="btn-increase">+</a>
                                        </div>
                                        <span class="warn-message"></span>
                                    </td>
                                    <td class="p-discount">￥0.00</td>
                                    <td class="p-integral">159 </td>
                                    <td class="p-subtotal">￥159.00</td>
                                    <td class="p-action">
                                        <a href="" class="btn-fav">收藏</a>
                                        <i>|</i>
                                        <a href="javascript:void(0);" class="btn-delete">移除</a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody class="cart-item">
                                <tr class="cart-product last">
                                    <td>
                                        <div class="p-pic">
                                            <a href="" target="_blank">
                                                <img src="images/cart-1.jpg" alt=""></a>
                                        </div>
                                    </td>
                                    <td class="p-info" width="344px">
                                        <div class="p-title">
                                            <a target="_blank" href="">品茶忆友 铸铁壶煮茶壶老铁壶 日本铁壶南部铁壶水壶 木桶铁壶
                                            </a></div>
                                        <div class="p-spec fix-empty">型号：黑色</div>
                                        <!--赠品 -->
                                        <!--商品促销 -->
                                        <div class="p-promotion">
                                            <ul>
                                            </ul>
                                        </div>
                                    </td>
                                    <td class="p-price">￥159.00</td>
                                    <td>
                                        <div class="p-quantity">
                                            <a href="javascript:void(0);" class="btn-decrease">-</a>
                                            <input type="text" name="modify_quantity[goods_302_1130][quantity]"
                                                value="1">
                                            <a href="javascript:void(0);" class="btn-increase">+</a>
                                        </div>
                                        <span class="warn-message"></span>
                                    </td>
                                    <td class="p-discount">￥0.00</td>
                                    <td class="p-integral">159 </td>
                                    <td class="p-subtotal">￥159.00</td>
                                    <td class="p-action">
                                        <a href="" class="btn-fav">收藏</a>
                                        <i>|</i>
                                        <a href="javascript:void(0);" class="btn-delete">移除</a>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody class="cart-item">
                                <tr class="cart-product last">
                                    <td>
                                        <div class="p-pic">
                                            <a href="" target="_blank">
                                                <img src="images/cart-1.jpg" alt=""></a>
                                        </div>
                                    </td>
                                    <td class="p-info" width="344px">
                                        <div class="p-title">
                                            <a target="_blank" href="">品茶忆友 铸铁壶煮茶壶老铁壶 日本铁壶南部铁壶水壶 木桶铁壶
                                            </a></div>
                                        <div class="p-spec fix-empty">型号：黑色</div>
                                        <!--赠品 -->
                                        <!--商品促销 -->
                                        <div class="p-promotion">
                                            <ul>
                                            </ul>
                                        </div>
                                    </td>
                                    <td class="p-price">￥159.00</td>
                                    <td>
                                        <div class="p-quantity">
                                            <a href="javascript:void(0);" class="btn-decrease">-</a>
                                            <input type="text" name="modify_quantity[goods_302_1130][quantity]"
                                                value="1">
                                            <a href="javascript:void(0);" class="btn-increase">+</a>
                                        </div>
                                        <span class="warn-message"></span>
                                    </td>
                                    <td class="p-discount">￥0.00</td>
                                    <td class="p-integral">159 </td>
                                    <td class="p-subtotal">￥159.00</td>
                                    <td class="p-action">
                                        <a href="" class="btn-fav">收藏</a>
                                        <i>|</i>
                                        <a href="javascript:void(0);" class="btn-delete">移除</a>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="4">
                                        <!-- 订单获得的优惠促销 -->
                                        <div class="order-promotion" id="order_promotion" style="display:none;">
                                            <h3><a href="javascript:void(0);"
                                                    class="btn-collapse action-toggle">-</a>订单优惠</h3>
                                            <ul class="content">
                                            </ul>
                                        </div>
                                        <!-- 未享受到的优惠促销 -->
                                        <div id="unused_promotion" class="unused-promotion" style="display:none;">
                                            <h3><a href="javascript:void(0);"
                                                    class="btn-collapse action-toggle">-</a>您还未享受到的优惠 <a
                                                    href="javascript:void(0);" class="action-fororder"><em>凑单»</em></a>
                                            </h3>
                                            <ul class="content">
                                            </ul>
                                        </div>
                                    </td>
                                    <!-- 订单价格 -->
                                    <td colspan="4" class="order-price" id="order_price">
                                        <ul>
                                            <li class="goods">
                                                <span class="label"><em>商品总金额：</em></span>
                                                <span class="price"><b>￥318.00</b></span>
                                            </li>
                                            <li class="discount">
                                                <span class="label"><em>订单优惠金额：</em></span>
                                                <span class="price"><b>￥0.00</b></span>
                                            </li>
                                            <li class="total">
                                                <span class="label">
                                                    <i>(订单可得积分
                                                        <span class="subtotal-integral">318</span>)
                                                    </i>
                                                    <em>总金额：</em>
                                                </span>
                                                <span class="price"><b>￥318.00</b></span>
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <!-- 按钮 -->
                                    <td colspan="4" class="cart-left">
                                        <button type="button"
                                            class="btn btn-flat action-clean"><span><span>清空购物车</span></span></button><button
                                            type="button"
                                            class="btn btn-caution action-fororder"><span><span>凑单商品</span></span></button>
                                    </td>
                                    <td colspan="4" class="cart-right">
                                        <a href="./" class="btn-link">继续购物</a>
                                        <button type="submit" class="btn btn-import btn-huge action-settle"
                                            rel="_request">
                                            <span>
                                                <span>
                                                    下单结算
                                                    <q lass="f-icon">►</q>
                                                </span>
                                            </span>
                                        </button>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        <script>
                            var table = document.getElementById("cart_container");
                            var btns = table.getElementsByTagName("a");
                            for (var btn of btns) {
                                btn.onclick = function () {
                                    var btn = this;
                                    var inp = btn.parentNode.children[1];
                                    var n = inp.value;
                                    if (btn.innerHTML == "+") {
                                        n++;
                                    } else if (n > 1) {
                                        n--;
                                    }
                                    inp.value = n;
                                    var tr = btn.parentNode.parentNode.parentNode;
                                    var price = parseFloat(tr.children[2].innerHTML.slice(1));
                                    console.log(price);
                                    var subtotal = price * n;
                                    tr.children[5].innerHTML = `${subtotal}`;
                                    tr.children[6].innerHTML = `￥${subtotal.toFixed(2)}`;



                                    var tbodys = table.querySelectorAll("tbody");
                                    var b = table.querySelector("tfoot>tr>td.order-price>ul>li.goods>span.price>b");
                                     var integral = table.querySelector("tfoot>tr>td.order-price>ul>li.total>span.label span.subtotal-integral");
                                    var money = table.querySelector("tfoot>tr>td.order-price>ul>li.total>span.price>b");
                                    var total=0;
                                    for (var tbody of tbodys) {
                                        var td=tbody.querySelector("tr.last>td.p-integral");
                                        total+=parseFloat(td.innerHTML);
                                    }
                                        b.innerHTML = `￥${total.toFixed(2)}`;
                                        integral.innerHTML = `${total}`;
                                        money.innerHTML = `￥${total.toFixed(2)}`;
                                }
                            }
                        </script>
                    </div>
                    <div></div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>

</html>